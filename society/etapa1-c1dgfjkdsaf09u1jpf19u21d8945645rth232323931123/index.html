<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Iron Society</title>

  <style>
    :root { color-scheme: dark; }

    html, body {
      height: 100%;
      margin: 0;
      background: #000;
      font-family: ui-serif, Georgia, "Times New Roman", serif;
    }

    .wrap{
      height:100%;
      display:flex;
      align-items:center;
      justify-content:center;
      text-align:center;
      padding: 24px;
      box-sizing:border-box;
    }

    .stack{
      display:flex;
      flex-direction:column;
      align-items:center;
      gap: 22px;
      max-width: 720px;
      width: 100%;
    }

    /* Relógio maior */
    .timer{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
      font-size: 34px;
      letter-spacing: 0.12em;
      opacity: 0.95;
      user-select: none;
    }

    /* Frase menor + fade mais lento */
    .phrase{
      font-size: clamp(18px, 3.6vw, 32px);
      line-height: 1.3;
      font-style: italic;
      color: #f3f3f3;
      opacity: 0;
      transition: opacity 1200ms ease-in-out;
      user-select: none;
      text-wrap: balance;
    }

    .phrase.show{
      opacity: 1;
    }

    .advance{
      display:none;
      margin-top: 6px;
      padding: 12px 20px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.18);
      background: rgba(255,255,255,0.06);
      color: #fff;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      font-size: 14px;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      text-decoration: none;
      cursor: pointer;
      user-select: none;
    }

    .advance:hover{
      background: rgba(255,255,255,0.10);
    }

    .advance:active{
      transform: translateY(1px);
    }
  </style>
</head>

<body>
  <main class="wrap">
    <section class="stack">
      <div id="timer" class="timer">--:--:--</div>
      <div id="phrase" class="phrase"></div>
      <a id="advance" class="advance" href="https://www.google.com" rel="noopener">
        Avançar
      </a>
    </section>
  </main>

  <script>
    const phrases = [
      "A pressa é inimiga da perfeição.",
      "Quem espera, sempre alcança.",
      "A direção é mais importante que a velocidade.",
      "Constância vence intensidade desorganizada.",
      "Disciplina diária constrói o que motivação não sustenta.",
      "Resultados duradouros são fruto de decisões repetidas, não de impulsos.",
      "“Tudo tem o seu tempo determinado.” (Eclesiastes 3:1)",
      "“Melhor é o fim das coisas do que o seu começo.” (Eclesiastes 7:8)",
      "“Aquele que é fiel no pouco, também é fiel no muito.” (Lucas 16:10)",
      "“Os planos bem elaborados levam à fartura.” (Provérbios 21:5)"
    ];

    const specialPhrase = "Quem espera no Senhor, celebra a vitória.";

    const $timer = document.getElementById("timer");
    const $phrase = document.getElementById("phrase");
    const $advance = document.getElementById("advance");

    const pad2 = n => String(n).padStart(2, "0");

    function inWindow(now){
      return now.getHours() === 5;
    }

    function nextWindowStart(now){
      const d = new Date(now);
      d.setHours(5,0,0,0);
      if (now >= d) d.setDate(d.getDate() + 1);
      return d;
    }

    function windowEnd(now){
      const d = new Date(now);
      d.setHours(10,0,0,0);
      return d;
    }

    function formatHMS(ms){
      const t = Math.max(0, Math.floor(ms / 1000));
      const h = Math.floor(t / 3600);
      const m = Math.floor((t % 3600) / 60);
      const s = t % 60;
      return `${pad2(h)}:${pad2(m)}:${pad2(s)}`;
    }

    let lastIndex = -1;

    function setPhrase(text){
      $phrase.classList.remove("show");
      setTimeout(() => {
        $phrase.textContent = text;
        $phrase.classList.add("show");
      }, 700);
    }

    function pickRandomPhrase(){
      let i;
      do {
        i = Math.floor(Math.random() * phrases.length);
      } while (i === lastIndex);
      lastIndex = i;
      return phrases[i];
    }

    function startRotation(){
      setPhrase(pickRandomPhrase());
      setInterval(() => {
        if (!inWindow(new Date())) {
          setPhrase(pickRandomPhrase());
        }
      }, 4000);
    }

    function tick(){
      const now = new Date();

      if (inWindow(now)) {
        $timer.textContent = formatHMS(windowEnd(now) - now);
        if ($phrase.textContent !== specialPhrase) {
          setPhrase(specialPhrase);
        }
        $advance.style.display = "inline-flex";
      } else {
        $timer.textContent = formatHMS(nextWindowStart(now) - now);
        $advance.style.display = "none";
      }
    }

    startRotation();
    tick();
    setInterval(tick, 250);
  </script>
</body>
</html>
